<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braille Translator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 100px;
            margin-bottom: 20px;
            font-size: 16px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin-right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Braille Translator</h1>

    <textarea id="inputText" placeholder="Enter text or Braille here..."></textarea>

    <div>
        <button onclick="translateToBraille()">Translate to Braille</button>
        <button onclick="translateFromBraille()">Translate Braille to Text</button>
    </div>

    <textarea id="outputText" readonly placeholder="Translation will appear here..."></textarea>

    <script>
        const brailleTable = {
            // English Braille Table
            'a': '⠁', 'b': '⠃', 'c': '⠉', 'd': '⠙', 'e': '⠑', 'f': '⠋',
            'g': '⠛', 'h': '⠓', 'i': '⠊', 'j': '⠚', 'k': '⠅', 'l': '⠇',
            'm': '⠍', 'n': '⠝', 'o': '⠕', 'p': '⠏', 'q': '⠟', 'r': '⠗',
            's': '⠎', 't': '⠞', 'u': '⠥', 'v': '⠧', 'w': '⠺', 'x': '⠭',
            'y': '⠽', 'z': '⠵',
            
            // Thai consonants
            'ก': '⠡', 'ข': '⠣', 'ค': '⠩', 'ง': '⠧', 'จ': '⠫', 
            'ฉ': '⠯', 'ช': '⠹', 'ซ': '⠯', 'ด': '⠛', 'ต': '⠙', 
            'ท': '⠹', 'น': '⠝', 'บ': '⠃', 'ป': '⠏', 'ผ': '⠡', 
            'ฝ': '⠧', 'พ': '⠱', 'ฟ': '⠋', 'ม': '⠍', 'ย': '⠽', 
            'ร': '⠗', 'ล': '⠇', 'ว': '⠧', 'ศ': '⠨', 'ส': '⠌', 
            'ห': '⠦', 'อ': '⠂', 'ฮ': '⠿',
            
            // Thai vowels
            'ะ': '⠕', 'ั': '⠹', 'า': '⠁', 'ำ': '⠉', 'ิ': '⠊', 
            'ี': '⠑', 'ึ': '⠋', 'ื': '⠎', 'ุ': '⠥', 'ู': '⠧', 
            'เ': '⠮', 'แ': '⠿', 'โ': '⠾', 'ใ': '⠾', 'ไ': '⠕'
        };

        const reverseBrailleTable = {
            // Reverse mapping for consonants
            '⠡': 'ก', '⠣': 'ข', '⠩': 'ค', '⠧': 'ง', '⠫': 'จ', 
            '⠯': 'ฉ', '⠹': 'ช', '⠛': 'ด', '⠙': 'ต', '⠹': 'ท', 
            '⠝': 'น', '⠃': 'บ', '⠏': 'ป', '⠡': 'ผ', '⠧': 'ฝ', 
            '⠱': 'พ', '⠋': 'ฟ', '⠍': 'ม', '⠽': 'ย', '⠗': 'ร', 
            '⠇': 'ล', '⠧': 'ว', '⠨': 'ศ', '⠌': 'ส', '⠦': 'ห', 
            '⠂': 'อ', '⠿': 'ฮ',
            
            // Reverse mapping for vowels
            '⠕': 'ะ', '⠹': 'ั', '⠁': 'า', '⠉': 'ำ', '⠊': 'ิ', 
            '⠑': 'ี', '⠋': 'ึ', '⠎': 'ื', '⠥': 'ุ', '⠧': 'ู', 
            '⠮': 'เ', '⠿': 'แ', '⠾': 'โ', '⠾': 'ใ', '⠕': 'ไ'
        };

        function translateToBraille() {
            const inputText = document.getElementById('inputText').value;
            let translatedText = '';
            let language = '';

            if (inputText.startsWith('[EN]')) {
                language = 'en';
                translatedText = translate(inputText.slice(4), language);
            } else if (inputText.startsWith('[TH]')) {
                language = 'th';
                translatedText = translate(inputText.slice(4), language);
            } else {
                translatedText = "Error: Please start the input with [EN] or [TH].";
            }

            document.getElementById('outputText').value = translatedText;
        }

        function translateFromBraille() {
            const inputText = document.getElementById('inputText').value;
            let translatedText = '';
            let language = '';

            if (inputText.startsWith('[EN]')) {
                language = 'en';
                translatedText = reverseTranslate(inputText.slice(4), language);
            } else if (inputText.startsWith('[TH]')) {
                language = 'th';
                translatedText = reverseTranslate(inputText.slice(4), language);
            } else {
                translatedText = "Error: Please start the input with [EN] or [TH].";
            }

            document.getElementById('outputText').value = translatedText;
        }

        function translate(text, language) {
            let translatedText = '';
            for (let char of text) {
                translatedText += brailleTable[char] || char;
            }
            return translatedText;
        }

        function reverseTranslate(text, language) {
            let translatedText = '';
            let vowelBuffer = '';

            for (let i = 0; i < text.length; i++) {
                let char = text[i];
                
                if (language === 'th') {
                    if (reverseBrailleTable[char] && 'เแโใไ'.includes(reverseBrailleTable[char])) {
                        vowelBuffer = reverseBrailleTable[char];
                    } else if (reverseBrailleTable[char]) {
                        if (vowelBuffer) {
                            translatedText += vowelBuffer + reverseBrailleTable[char];
                            vowelBuffer = '';
                        } else {
                            translatedText += reverseBrailleTable[char];
                        }
                    } else {
                        translatedText += char;
                    }
                } else if (language === 'en') {
                    translatedText += reverseBrailleTable[char] || char;
                }
            }

            if (vowelBuffer) {
                translatedText += vowelBuffer;
            }

            return translatedText;
        }
    </script>
</body>
</html>